!function(n,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var e={};t(e),n.SettingsManager=e}}(this,function(n){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function r(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function o(n,t,e){return t&&r(n.prototype,t),e&&r(n,e),n}function i(n){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function u(n){return"function"==typeof n}function c(n){return null!==n&&"object"===i(n)&&!f(n)}function f(n){return Array.isArray(n)}function s(e,t){var n=f(t),r=n&&[]||{};return n?(e=e||[],r=r.concat(e),t.forEach(function(n,t){void 0===r[t]?r[t]=n:"object"===i(n)?r[t]=s(e[t],n):-1===e.indexOf(n)&&r.push(n)})):(c(e)&&Object.keys(e||{}).forEach(function(n){r[n]=e[n]}),Object.keys(t||{}).forEach(function(n){c(t[n])&&t[n]&&e[n]?r[n]=s(e[n],t[n]):r[n]=t[n]})),r}function a(e,r,o){return new Promise(function(n,t){if(u(e))try{n(e.apply(o||{},r))}catch(n){t(n)}n()})}Object.defineProperty(n,"__esModule",{value:!0}),n.isFunction=u,n.isObject=c,n.isArray=f,n.merge=s,n.execute=a,n.SettingsManager=n.InMemoryStore=void 0;var l=function(){function n(){e(this,n),this.settings={}}return o(n,[{key:"load",value:function(){return Promise.resolve(s({},this.settings))}},{key:"save",value:function(n){return this.settings=s(this.settings,n),Promise.resolve(s({},this.settings))}},{key:"clear",value:function(){return this.settings={},Promise.resolve({})}}]),n}();n.InMemoryStore=l;var t=function(){function t(n){e(this,t),this.backingStore=n||new l}return o(t,[{key:"load",value:function(n,t){return h(this.backingStore.load(),n,t)}},{key:"save",value:function(n,t,e){return n&&c(n)?h(this.backingStore.save(n),t,e):y(a(e,['"settings" is not an object']))}},{key:"clear",value:function(n,t){return h(this.backingStore.clear(),n,t)}}]),t}();function y(n){return n.then(function(){}).catch(function(){})}function h(n,t,e){return n.then(function(n){return y(a(t,[n]))}).catch(function(n){return y(a(e,[n]))})}n.SettingsManager=t});